# JOBSONAR V5.2

Комплексная система мониторинга вакансий с умным расписанием, фильтрацией по навыкам, поддержкой удаленки и автономной системой контроля работоспособности.

---

## 1. HR BOT (MAIN.PY)
**Специализированный модуль для мониторинга управленческих позиций в сфере управления персоналом.**

### ЦЕЛЕВЫЕ РОЛИ
HR Director (HRD), HR Business Partner (HRBP), Head of Recruitment, Head of HR.

### ЛОГИКА ФИЛЬТРАЦИИ
Вакансия проходит первичный отбор, если соответствует одному из условий:
1. Наличие прямого маркера руководящей должности (HRD, HRBP).
2. Сочетание профильной сферы деятельности с лидерской ролью (например, Директор по персоналу).

### АНАЛИЗ КОМПЕТЕНЦИЙ
Система автоматически сканирует текст описания на наличие ключевых навыков: 1С/ЗУП, КДП, ТК РФ, C&B, Budgeting, English (уровень Upper-Intermediate и выше).

### ПРАВИЛА ИСКЛЮЧЕНИЯ
Бот автоматически блокирует вакансии следующих категорий:
* **ЛИНИЙНЫЙ ПЕРСОНАЛ**: Рекрутеры и сорсеры без управленческих полномочий.
* **НАЧАЛЬНЫЙ УРОВЕНЬ**: Позиции классов Assistant, Junior, Intern, а также стажировки.
* **НЕПРОФИЛЬНЫЕ ФУНКЦИИ**: Офис-менеджеры, секретари и административный персонал.
* **ГЕОГРАФИЯ**: Казахстан и другие регионы, включенные в список ограничений.

---

## 2. ANALYST BOT (MAIN_ANALYST.PY)
**Инструмент поиска квалифицированных аналитиков с приоритетом на технический стек технологий.**

### ЦЕЛЕВЫЕ РОЛИ
System Analyst, Business Analyst, Data Analyst, Product Analyst, BI Analyst.

### ТЕХНИЧЕСКИЙ ЦЕНЗ (HARD SKILLS)
Система применяет правило «2+ Skills». Вакансия игнорируется, если в описании найдено менее двух целевых технологий из списка: SQL, Python, ETL, DWH, Kafka, REST/SOAP, BPMN, BI-системы.

### ПРОВЕРКА СИЛЫ СТЕКА
Модуль фильтрует «слабые» вакансии. Если в описании присутствуют только инструменты управления (Jira, Confluence) без упоминания инструментов обработки данных (SQL, Python), такая вакансия отсеивается.

### ЭКОНОМИЧЕСКИЙ ФИЛЬТР
Приоритет отдается предложениям с подтвержденным доходом от 200,000 RUB.

---

## 3. SALES BOT (MAIN_SALES.PY)
**Модуль поиска менеджеров B2B-продаж в сегментах IT и Digital с жестким контролем условий труда.**

### ЦЕЛЕВЫЕ РОЛИ
Sales Manager, Business Development Manager (BDM), Account Manager (KAM), РОП.

### ФИЛЬТР АНТИ-ИП
Автоматическая блокировка вакансий от индивидуальных предпринимателей и физических лиц через анализ юридических маркеров работодателя.

### КОНТРОЛЬ УДАЛЕННОГО ФОРМАТА
Система блокирует вакансии, содержащие признаки офисной или гибридной работы (офис, гибрид, на месте, разъездной характер). Допускается только полная удаленная работа.

### ОТРАСЛЕВОЙ ФИЛЬТР
* **РАЗРЕШЕННЫЕ НИШИ**: IT, SaaS, EdTech, FinTech, Digital, AI/ML.
* **ЗАПРЕЩЕННЫЕ НИШИ**: Недвижимость, Логистика, Криптовалюты, Гемблинг, Стройка, FMCG.

---

## 4. MONITOR BOT (MONITOR.PY)
**Служебный модуль для обеспечения отказоустойчивости и мониторинга всей экосистемы.**

### ФУНКЦИИ КОНТРОЛЯ
* **ДИАГНОСТИКА**: Проверка статуса процессов всех ботов каждые 30 минут.
* **ОПОВЕЩЕНИЕ**: Мгновенная отправка Traceback-логов администратору при обнаружении сбоя.
* **ОБСЛУЖИВАНИЕ**: Автоматическая очистка лог-файлов при достижении размера 5 МБ (с сохранением последних 200 строк).

---

## ТЕХНИЧЕСКИЕ ПАРАМЕТРЫ

### СИНХРОНИЗАЦИЯ ВРЕМЕНИ
Все отчеты, логи и циклы проверки синхронизированы с Московским временем (UTC+3).

### БЕЗОПАСНОСТЬ
Конфиденциальные данные (токены, ID чатов) изолированы в файле .env.

### УСТОЙЧИВОСТЬ СВЯЗИ
Применение Infinity Polling обеспечивает автоматическое переподключение к API Telegram при нестабильном соединении.

## 5. ОБНОВЛЕНИЕ V5.3 (TURBO & QUALITY)
**Масштабное обновление логики расписания, фильтрации мусора и технической архитектуры.**

### ТУРБО-РЕЖИМ (SMART SCHEDULE V2)
Внедрен динамический алгоритм частоты проверок в зависимости от времени суток (МСК):
* **РАБОЧИЙ ПИК (10:00 - 20:00)**: Агрессивная проверка каждые 10–15 минут для мгновенного перехвата вакансий.
* **УТРО/ВЕЧЕР**: Умеренный режим (раз в 20–30 минут).
* **НОЧЬ/ВЫХОДНЫЕ**: Экономный режим сна для снижения нагрузки на API.

### РАСШИРЕНИЕ ВОРОНКИ (HR BOT)
* **НОВЫЕ РОЛИ**: Добавлен поиск по ключевым словам HR Lead, People Partner, Head of Talent.
* **ФИЛЬТР ПРОИЗВОДСТВА**: Внедрен жесткий блок-лист для отсева вакансий промышленных предприятий (цех, завод, мастер участка, машиностроение, АПК).

### УЛУЧШЕНИЕ КАЧЕСТВА (ANALYST & SALES)
* **ANALYST ANTI-DEV**: Блокировка вакансий разработчиков, ошибочно попадающих в аналитику (фильтр по словам developer, backend, frontend, java в заголовке).
* **SALES SMART FILTER**: Улучшенный алгоритм детектирования ИП. Распознает скрытые форматы вида «Название (ИП Фамилия)» в любой части названия компании.

### НОВАЯ СИСТЕМА ОТЧЕТНОСТИ
* **РАЗДЕЛЬНАЯ СТАТИСТИКА**: Вечерний отчет (23:00 МСК) теперь показывает количество вакансий в разрезе «Топ компании» vs «Остальные».
* **ЧЕСТНЫЙ ПОДСЧЕТ**: Статистика считается строго за календарные сутки на основе записей в базе данных, а не времени работы скрипта.

### ТЕХНИЧЕСКАЯ СТАБИЛИЗАЦИЯ
* **АБСОЛЮТНЫЕ ПУТИ**: Полная независимость от директории запуска. Логи, статусы и БД всегда создаются в папке скрипта.
* **ВНУТРЕННЕЕ ЛОГИРОВАНИЕ**: Отказ от перенаправления вывода. Боты самостоятельно пишут ротируемые логи в UTF-8.
* **FAIL-SAFE LOOP**: Главный цикл обернут в защиту от падений. При обрыве сети бот ожидает восстановление, а не завершает работу.